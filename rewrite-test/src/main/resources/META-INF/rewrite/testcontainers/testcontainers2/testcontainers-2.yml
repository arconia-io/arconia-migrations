# Based on https://github.com/testcontainers/testcontainers-java/releases/tag/2.0.0
---
type: specs.openrewrite.org/v1beta/recipe
name: io.arconia.rewrite.test.testcontainers.UpgradeTestcontainers_2
displayName: Migrate to Testcontainers 2.x
description: Migrate a Java application to the latest Testcontainers 2.x release.
tags:
  - junit
  - testcontainers
recipeList:

  # Dependency Changes
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: activemq
      newArtifactId: testcontainers-activemq
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: azure
      newArtifactId: testcontainers-azure
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: cassandra
      newArtifactId: testcontainers-cassandra
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: chromadb
      newArtifactId: testcontainers-chromadb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: clickhouse
      newArtifactId: testcontainers-clickhouse
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: cockroachdb
      newArtifactId: testcontainers-cockroachdb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: consul
      newArtifactId: testcontainers-consul
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: couchbase
      newArtifactId: testcontainers-couchbase
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: cratedb
      newArtifactId: testcontainers-cratedb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: database-commons
      newArtifactId: testcontainers-database-commons
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: databend
      newArtifactId: testcontainers-databend
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: db2
      newArtifactId: testcontainers-db2
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: dynalite
      newArtifactId: testcontainers-dynalite
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: elasticsearch
      newArtifactId: testcontainers-elasticsearch
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: gcloud
      newArtifactId: testcontainers-gcloud
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: grafana
      newArtifactId: testcontainers-grafana
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: hivemq
      newArtifactId: testcontainers-hivemq
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: influxdb
      newArtifactId: testcontainers-influxdb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: jdbc
      newArtifactId: testcontainers-jdbc
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: junit-jupiter
      newArtifactId: testcontainers-junit-jupiter
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: k3s
      newArtifactId: testcontainers-k3s
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: k6
      newArtifactId: testcontainers-k6
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: kafka
      newArtifactId: testcontainers-kafka
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: ldap
      newArtifactId: testcontainers-ldap
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: localstack
      newArtifactId: testcontainers-localstack
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: mariadb
      newArtifactId: testcontainers-mariadb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: milvus
      newArtifactId: testcontainers-milvus
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: minio
      newArtifactId: testcontainers-minio
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: mockserver
      newArtifactId: testcontainers-mockserver
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: mongodb
      newArtifactId: testcontainers-mongodb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: mssqlserver
      newArtifactId: testcontainers-mssqlserver
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: mysql
      newArtifactId: testcontainers-mysql
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: neo4j
      newArtifactId: testcontainers-neo4j
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: nginx
      newArtifactId: testcontainers-nginx
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: oceanbase
      newArtifactId: testcontainers-oceanbase
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: ollama
      newArtifactId: testcontainers-ollama
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: openfga
      newArtifactId: testcontainers-openfga
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: oracle-free
      newArtifactId: testcontainers-oracle-free
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: oracle-xe
      newArtifactId: testcontainers-oracle-xe
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: orientdb
      newArtifactId: testcontainers-orientdb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: pinecone
      newArtifactId: testcontainers-pinecone
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: postgresql
      newArtifactId: testcontainers-postgresql
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: presto
      newArtifactId: testcontainers-presto
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: pulsar
      newArtifactId: testcontainers-pulsar
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: qdrant
      newArtifactId: testcontainers-qdrant
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: questdb
      newArtifactId: testcontainers-questdb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: r2dbc
      newArtifactId: testcontainers-r2dbc
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: rabbitmq
      newArtifactId: testcontainers-rabbitmq
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: redpanda
      newArtifactId: testcontainers-redpanda
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: scylladb
      newArtifactId: testcontainers-scylladb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: selenium
      newArtifactId: testcontainers-selenium
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: solace
      newArtifactId: testcontainers-solace
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: solr
      newArtifactId: testcontainers-solr
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: spock
      newArtifactId: testcontainers-spock
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: tidb
      newArtifactId: testcontainers-tidb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: timeplus
      newArtifactId: testcontainers-timeplus
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: toxiproxy
      newArtifactId: testcontainers-toxiproxy
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: trino
      newArtifactId: testcontainers-trino
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: typesense
      newArtifactId: testcontainers-typesense
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: vault
      newArtifactId: testcontainers-vault
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: weaviate
      newArtifactId: testcontainers-weaviate
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.testcontainers
      oldArtifactId: yugabytedb
      newArtifactId: testcontainers-yugabytedb

  # Dependency Versions
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.testcontainers
      artifactId: "*"
      newVersion: 2.x

  # Type Changes
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.CassandraContainer
      newFullyQualifiedTypeName: org.testcontainers.cassandra.CassandraContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.ClickHouseContainer
      newFullyQualifiedTypeName: org.testcontainers.clickhouse.ClickHouseContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.CockroachContainer
      newFullyQualifiedTypeName: org.testcontainers.cockroachdb.CockroachContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.Db2Container
      newFullyQualifiedTypeName: org.testcontainers.db2.Db2Container
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.BigQueryEmulatorContainer
      newFullyQualifiedTypeName: org.testcontainers.gcloud.BigQueryEmulatorContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.BigtableEmulatorContainer
      newFullyQualifiedTypeName: org.testcontainers.gcloud.BigtableEmulatorContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.DatastoreEmulatorContainer
      newFullyQualifiedTypeName: org.testcontainers.gcloud.DatastoreEmulatorContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.FirestoreEmulatorContainer
      newFullyQualifiedTypeName: org.testcontainers.gcloud.FirestoreEmulatorContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.PubSubEmulatorContainer
      newFullyQualifiedTypeName: org.testcontainers.gcloud.PubSubEmulatorContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.SpannerEmulatorContainer
      newFullyQualifiedTypeName: org.testcontainers.gcloud.SpannerEmulatorContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.KafkaContainer
      newFullyQualifiedTypeName: org.testcontainers.kafka.KafkaContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.localstack.LocalStackContainer
      newFullyQualifiedTypeName: org.testcontainers.localstack.LocalStackContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.MariaDBContainer
      newFullyQualifiedTypeName: org.testcontainers.mariadb.MariaDBContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.MockServerContainer
      newFullyQualifiedTypeName: org.testcontainers.mockserver.MockServerContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.MongoDBContainer
      newFullyQualifiedTypeName: org.testcontainers.mongodb.MongoDBContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.MSSQLServerContainer
      newFullyQualifiedTypeName: org.testcontainers.mssqlserver.MSSQLServerContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.MySQLContainer
      newFullyQualifiedTypeName: org.testcontainers.mysql.MySQLContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.Neo4jContainer
      newFullyQualifiedTypeName: org.testcontainers.neo4j.Neo4jContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.NginxContainer
      newFullyQualifiedTypeName: org.testcontainers.nginx.NginxContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.OrientDBContainer
      newFullyQualifiedTypeName: org.testcontainers.orientdb.OrientDBContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.PostgreSQLContainer
      newFullyQualifiedTypeName: org.testcontainers.postgresql.PostgreSQLContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.PulsarContainer
      newFullyQualifiedTypeName: org.testcontainers.pulsar.PulsarContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.RabbitMQContainer
      newFullyQualifiedTypeName: org.testcontainers.rabbitmq.RabbitMQContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.BrowserWebDriverContainer
      newFullyQualifiedTypeName: org.testcontainers.selenium.BrowserWebDriverContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.SolrContainer
      newFullyQualifiedTypeName: org.testcontainers.solr.SolrContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.ToxiproxyContainer
      newFullyQualifiedTypeName: org.testcontainers.toxiproxy.ToxiproxyContainer
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.testcontainers.containers.TrinoContainer
      newFullyQualifiedTypeName: org.testcontainers.trino.TrinoContainer

  # Method Name Changes
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: org.testcontainers.containers.ContainerState getContainerIpAddress()
      newMethodName: getHost
      matchOverrides: true
