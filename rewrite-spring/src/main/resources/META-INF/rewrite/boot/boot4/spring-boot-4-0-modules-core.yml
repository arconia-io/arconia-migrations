# Based on https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide
---
type: specs.openrewrite.org/v1beta/recipe
name: io.arconia.rewrite.spring.boot4.MigrateCoreModule
displayName: Migrate Spring Boot Core module to Spring Boot 4.0
description: Migrate Spring Boot Core module to Spring Boot 4.0.
recipeList:
  - org.openrewrite.java.dependencies.RemoveDependency:
      groupId: org.springframework.boot
      artifactId: spring-boot-starter
  - org.openrewrite.java.dependencies.RemoveDependency:
      groupId: org.springframework.boot
      artifactId: spring-boot-starter-test

  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.boot.BootstrapRegistry
      newFullyQualifiedTypeName: org.springframework.boot.bootstrap.BootstrapRegistry
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.boot.env.EnvironmentPostProcessor
      newFullyQualifiedTypeName: org.springframework.boot.EnvironmentPostProcessor
  - org.openrewrite.text.FindAndReplace:
      find: org.springframework.boot.env.EnvironmentPostProcessor
      replace: org.springframework.boot.EnvironmentPostProcessor
      caseSensitive: true
      filePattern: "**/spring.factories"

  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.boot.test.autoconfigure.properties.PropertyMapping
      newFullyQualifiedTypeName: org.springframework.boot.test.context.PropertyMapping
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.boot.test.autoconfigure.properties.SkipPropertyMapping
      newFullyQualifiedTypeName: org.springframework.boot.test.context.PropertyMapping.Skip
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.boot.test.web.server.LocalServerPort
      newFullyQualifiedTypeName: org.springframework.boot.web.server.test.LocalServerPort
