# Based on https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-7.0-Release-Notes
---
type: specs.openrewrite.org/v1beta/recipe
name: io.arconia.rewrite.spring.framework7.UpgradeSpringFramework_7_0
displayName: Migrate to Spring Framework 7.0
description: Migrate a Spring application to the latest Spring Framework 7.0.x release.
tags:
  - spring
  - framework
recipeList:

  # Dependency Versions
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.springframework
      artifactId: "*"
      newVersion: 7.0.x

  # Managed Dependencies
  - org.openrewrite.java.jackson.UpgradeJackson_2_3
  - io.arconia.rewrite.test.junit.UpgradeJUnit_6

  # Type Changes: Core
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.lang.Nullable
      newFullyQualifiedTypeName: org.jspecify.annotations.Nullable

  # Type Changes: Jackson
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: org.springframework.http.converter.json.Jackson2ObjectMapperBuilder
      newFullyQualifiedTypeName: tools.jackson.databind.json.JsonMapper$Builder

  # Jackson 2 -> 3
  # To be removed after is merged
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator getCodec()
      newMethodName: objectWriteContext
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator getCurrentValue()
      newMethodName: currentValue
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator setCurrentValue(..)
      newMethodName: assignCurrentValue
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeObject(..)
      newMethodName: writePOJO
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeArrayFieldStart(..)
      newMethodName: writeArrayPropertyStart
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeBinaryField(..)
      newMethodName: writeBinaryProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeBooleanField(..)
      newMethodName: writeBooleanProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeFieldId(..)
      newMethodName: writePropertyId
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeFieldName(..)
      newMethodName: writeName
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeNullField(..)
      newMethodName: writeNullProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeNumberField(..)
      newMethodName: writeNumberProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeObjectField(..)
      newMethodName: writeObjectProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeObjectFieldStart(..)
      newMethodName: writeObjectPropertyStart
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeOmittedField(..)
      newMethodName: writeOmittedProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writePOJOField(..)
      newMethodName: writePOJOProperty
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonGenerator writeStringField(..)
      newMethodName: writeStringProperty

  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getCodec()
      newMethodName: objectReadContext
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getCurrentLocation()
      newMethodName: currentLocation
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getTokenLocation()
      newMethodName: currentTokenLocation
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getCurrentValue()
      newMethodName: currentValue
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser setCurrentValue(..)
      newMethodName: assignCurrentValue
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getText(..)
      newMethodName: getString
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getTextCharacters()
      newMethodName: getStringCharacters
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getTextLength()
      newMethodName: getStringLength
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser getTextOffset()
      newMethodName: getStringOffset
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser hasTextCharacters()
      newMethodName: hasStringCharacters
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.fasterxml.jackson.core.JsonParser nextTextValue()
      newMethodName: nextStringValue
